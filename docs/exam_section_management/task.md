# タスク: 試験区分ごとの問題管理と表示の修正

## 背景

ユーザーから、試験区分（応用情報、FP3級など）ごとに問題を管理し、適切に表示・実施できるようにしたいとの要望がありました。
現状のデータベース設計では `exams` テーブルと `sections` テーブルの `exam_id` による関連付けで論理的な分離は可能ですが、UI上での表示（特にセクション番号の扱いや、全セクション表示時の区別）が不十分でした。

## 実施した変更

### 1. セクション表示番号の適正化

- **課題**: セクションの番号表示にグローバルな `id` を使用していたため、2つ目以降の試験区分で「#101」のような予期しない番号が表示される可能性がありました。
- **修正**: `sections` テーブルの `order` カラム（試験区分ごとの順序）を使用するように変更しました。これにより、どの試験区分でも「#01」から始まる適切な番号が表示されます。
  - `frontend/components/features/sections-accordion.tsx`: 表示ロジックを修正
  - `frontend/screens/section.tsx`: `order` プロパティを受け渡すよう修正

### 2. セクション一覧における試験区分の明示

- **課題**: 全セクションを表示する画面（`/sections`）において、どの試験区分のセクションかが判別しづらい状態でした。
- **修正**: セクション項目に `examTitle` を表示できるようにし、混在リストでも識別可能にしました。
  - `frontend/components/features/sections-accordion.tsx`: 試験区分名の表示を追加
  - `app/sections/page.tsx`: セクション取得時に試験区分情報も結合して取得するよう変更 (`getAllSections` → `getAllSectionsWithExams`)

### 3. 模擬テストの試験区分フィルタリング対応（バックエンド）

- **課題**: 模擬テスト機能が全問題からランダムに出題する仕様であり、特定の試験区分の模擬テストを実施する基盤がありませんでした。
- **修正**: ランダム問題取得APIにおいて、`examId` によるフィルタリングを可能にしました。
  - `backend/db/queries.ts`: `getRandomQuestions` に `examId` 引数を追加
  - `app/api/mock-test/random/route.ts`: クエリパラメータ `examId` を受け付けるよう修正

## 今後の推奨タスク

- **模擬テストUIの更新**: ダッシュボードの模擬テストカードから、試験区分を選択して開始できるようなUI変更（または各試験区分ページへの模擬テストボタン配置）。
- **データ登録**: 各試験区分（exams）とそれに紐づくセクション（sections）のデータが正しく `order` を持っているか確認・整備する。
